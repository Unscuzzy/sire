#################################
#
# Netlify-cms config file
#
# Doc:
# https://www.netlifycms.org/docs/configuration-options/
#
#################################

# General options
backend:
  # local backend
  # WARN: Will not save data, it just for develop fields
  # name: test-repo

  # Netlify as backend
   name: git-gateway
   accept_roles:
     - admin
     - editor

media_folder: static/uploads
public_folder: uploads

# Others Options
# publish_mode: editorial_workflow
# site_url: https://your-site.com
# display_url: https://your-site.com
# logo_url: https://your-site.com/images/logo.svg
# show_preview_links: false

slug:
  encoding: "ascii"
  clean_accents: true
  sanitize_replacement: "_"

# Collections are eq as CPTs in WordPress
collections:
  - name: pages
    label: Pages
    delete: false
    files:
      # Page: Home
      - file: data/static-pages/index.md
        name: index
        label: "Page d'accueil"
        fields:
          - {
              name: templateKey,
              label: Template Key,
              widget: hidden,
              default: home-page,
          }
          - {
              name: title,
              label: Titre,
              widget: string,
              hint: 'Utilisé pour le SEO',
          }
          - {
            name: excerpt,
            label: Extrait,
            widget: text,
            hint: 'Utilisé pour le SEO',
          }
          - {
            name: headerSlider,
            label: "Slider principal",
            widget: list,
            fields: [
              {name: image, label: Image, widget: image},
              {name: title, label: Titre, widget: string}
            ]
          }
          - {
            name: presentationTitle,
            label: "Titre section présentation",
            widget: string,
          }
          - {
            name: presentationBody,
            label: "Texte de présentation",
            widget: markdown,
          }
          - {
            name: presentationSlider,
            label: "Slider de présentation",
            widget: list,
            fields: [
              {name: image, label: Image, widget: image},
              {name: title, label: Titre, widget: string}
            ]

          }
          - {
            name: processTitle,
            label: "Titre section processus",
            widget: string,
          }
          - {
            name: process,
              label: "Étapes du processus",
              widget: list,
              fields: [{name: step, label: Étapes, widget: string}]
          }
          - {
            name: materialTitle,
            label: "Titre section matériaux",
            widget: string,
          }
          - {
            name: materials,
            label: "Matériaux",
            widget: list,
            fields: [
              {name: title, label: Title, widget: string},
              {name: content, label: Contenu, widget: markdown},
              {name: image, label: Image, widget: image}
            ]
          }
          - {
            name: portfolioTitle,
            label: "Titre section portfolio",
            widget: string,
          }
          - {
            name: portfolioBody,
            label: "Texte de présentation",
            widget: markdown,
          }
          - {
            name: materials,
            label: "Matériaux",
            widget: relation,
            collection: projects,
            searchFields: ['title', 'business'],
            valueField: 'title'
          }

  # Portfolio projects collection
  - name: projects
    label: Projets
    folder: data/portfolio
    create: true
    slug: '{{year}}-{{month}}-{{day}}-{{slug}}'
    fields:
      - {
        name: templateKey,
        label: Template Key,
        widget: hidden,
        default: projects,
      }
      - {
        name: title,
        label: Titre,
        widget: string,
        hint: 'Utilisé pour le SEO',
      }
      - {
        name: excerpt,
        label: Extrait,
        widget: text,
        hint: 'Utilisé pour le SEO',
      }
      - {
        name: business,
        label: "L'entreprise",
        widget: string
      }
      - {
        name: thumbnail,
        label: "Image à la une",
        widget: image
      }
      - {
        name: images,
        label: "Autres images",
        widget: list,
        field: {name: image, label: image, widget: image}
      }
      - {
        name: body,
        label: "Texte de présentation",
        widget: markdown
      }
